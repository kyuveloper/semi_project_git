<!--<!DOCTYPE html>-->
<!--&lt;!&ndash;<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="layout/default_layout">&ndash;&gt;-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <title>회원가입</title>-->
<!--    <script src="https://code.jquery.com/jquery-3.7.1.min.js"-->
<!--            integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="-->
<!--            crossorigin="anonymous"></script>-->
<!--</head>-->
<!--<body>-->
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="https://kit.fontawesome.com/e8f09b5de5.js" crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <link rel="stylesheet" th:href="@{/css/style.css}"/>
    <link rel="stylesheet" th:href="@{/css/user.css}"/>
    <link rel="stylesheet" th:href="@{/css/comInfo.css}" />
    <script defer th:src="@{/js/main.js}"></script>
    <script defer th:src="@{/js/comInfo.js}"></script>
<!--    <script type="text/javascript" src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpClientId=z00qc7owtc"></script>-->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
            integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
            crossorigin="anonymous"></script>
    <title>Semi Project Company Information</title>
</head>
<body>
<header id="header_bar">

    <nav id="nav_bar">
        <div class="main_title">
            <a th:href="@{/}"><i class="fa-solid fa-dog"></i> PetTales</a>
        </div>
        <div class="main_menus">
            <div class="main_menu"><a th:href="@{/}">Home</a></div>
            <div class="main_menu"><a th:href="@{/comInfo}">Start</a></div>
            <div class="main_menu"><a th:href="@{/plan/make_plan}">Support</a></div>
            <div class="main_menu"><a href="#">Contact Us</a></div>
        </div>
        <div class="main_mypage">
            <a href="#"><i class="fa-solid fa-user" style="color: #ffffff;"></i></a>
        </div>
    </nav>
</header>
<article>
    <div class="myPage_box">
        <ul class="myPage_menus">
            <li class="myPage_menu">로그인</li>
            <li class="myPage_menu">마이페이지</li>
            <li class="myPage_menu">설정</li>
        </ul>
    </div>
</article>
<!--<th:block layout:fragment="content">-->
    <h1>회원가입</h1>

    <!--이메일과 닉네임에 확인버튼을 만들고 3개가 다 일치하면 회원가입 버튼이 활성화되게끔-->

<form th:action="@{/user/signup}" method="post">
    <!--이메일 입력-->
    <div class="signUpEmailDiv">
    <p><img th:src="@{/image/signup/emailLogo.png}" class="emailLogo">
    <input type="email" name="userEmail" placeholder="이메일" id="userEmail" onblur="emailCheck()" size="60"></p>
    <p><small>이메일은 필수로 입력해주세요</small></p>
        <p id="check-result1"></p> <!--처리결과 보여주는 곳-->
    </div>
    <!--닉네임 입력-->
    <div class="nicknameDiv">
        <p><img th:src="@{/image/signup/nickLogo.png}" class="nicknameDiv">
            <input type="text" name="userNickName" placeholder="닉네임" id="userNickName" onblur="nickNameCheck()" size="60"></p>
<!--    <p id="check-result2"></p>-->
    <p><small>닉네임은 필수입니다 특수문자를 포함하지 않은 2~8자리를 입력해주세요.</small></p>
    </div>

    <!--비밀번호입력-->
    <div class="passwordDiv">
    <p><img th:src="@{/image/signup/passLogo.jpg}" class="passwordDiv" height="30px" width="30px">
        <input type="password" name="password" placeholder="비밀번호" id="password1" size="60"></p>
    <p><small>비밀번호는 8~16자리수여야 합니다. 영문 소문자, 숫자, 특수문자를 1개 이상 포함해야 합니다.</small></p>
    </div>

    <!--비밀번호 확인-->
    <div class="passwordDiv">
    <p><img th:src="@{/image/signup/passLogo.jpg}" height="30px" width="30px">
        <input type="password" name="checkPassword" placeholder="비밀번호 확인" id="password2" size="60">
        <button type="button" onclick="test()">확인하기</button><!--비밀번호가 같은지 확인--></p>
    </div>


    <br>
    <!--    <button  >회원가입</button> &lt;!&ndash;disabled="disabled"는 버튼 비활성화&ndash;&gt;-->
    <p><button type="submit" class="btn signUpBtn" id="target_btn" disabled="disabled" >회원가입</button></p>
</form>
<!--</th:block>-->
<footer>
    <div id="footer">
        <div class="comInfo">
            <div class="comLogo"><i class="fa-solid fa-dog"></i></div>
            <div class="comInfo_text">
                <p>
                    주식회사 위드명 | 대표 김아무개<br>
                    사업자 등록 번호 123-456-78910<br>
                    서울특별시 구로구 경인로 557 삼영빌딩 4층<br>
                    contact@withmung.com<br>
                </p>
            </div>
        </div>
        <div class="etc">
            <p>
                <a href="">이용약관</a> | <a href="">개인정보처리지침</a> | <a href="">고객지원</a> | <a href="">1:1 문의</a>
            </p>
        </div>
        <div class="sns">
            <a th:href="@{http://www.facebook.com}" target="_blank"><i class="fa-brands fa-square-facebook fa-fade"></i></a>
            <a th:href="@{http://www.instagram.com}" target="_blank"><i class="fa-brands fa-instagram fa-fade"></i></a>
            <a th:href="@{http://www.youtube.com}" target="_blank"><i class="fa-brands fa-youtube fa-fade"></i></a>
        </div>
    </div>
</footer>



<script th:inline="javascript">
    const message = [[${message}]];

    if(message){
        alert(message);
        //새로고침
        location.reload();
    }
</script>
<script th:inline="javascript">
    <!--중복체크-->
    //이메일 입력값을 가져오고,
    //입력값을 서버로 전송하고 똑같은 이메일이 있는지 체크한 후
    //사용 가능 여부를 이메일 입력창 아래에 표시
    const emailCheck = () => {
        const email = document.getElementById("userEmail").value; // 입력값을 가져오는 내용
        const checkResult = document.getElementById("check-result1"); // <p id="check-result"></p> 이거 가져오는 요소

        // 이메일 유효성 검사 추가
        const emailRegex = /^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,6}$/;
        if (!emailRegex.test(email)) {
            checkResult.style.color = "red";
            checkResult.innerHTML = "올바른 이메일 형식이 아닙니다.";
            return;
        }

        console.log("입력한 이메일",email); // 확인용 콘솔
        $.ajax({
            //요청방식 post,url: "email-check",데이터: 이메일
            type: "post", //post방식으로
            url: "/user/email-check", //이주소에 보내겠다
            data: {
                "memberEmail": email //보내고자하는 데이터의 내용 memberEmail이 파라미터이름 email은 사용자가 입력한 이메일 값
            },
            success: function (res){ //요청 성공시
                console.log("요청성공", res); //콘솔 확잉용
                if (res === 1){
                    console.log("사용가능한 이메일");
                    checkResult.style.color = "green";
                    checkResult.innerHTML = "사용 가능한 이메일입니다.";
                } else {
                    console.log("이미 사용중인 이메일");
                    checkResult.style.color = "red";
                    checkResult.innerHTML = "사용 중인 이메일입니다."
                }
            },
            error: function (err){
                console.log("에러발생", err);
            }
        })
    }
</script>
<script th:inline="javascript">
    <!--닉네임 중복체크-->
    // const nickNameCheck = () => {
    //     const nickName = document.getElementById("userNickName").value;
    //     const checkResult2 = document.getElementById("check-result2");
    //     console.log("입력한 닉네임",nickName);
    //     $.ajax({
    //         type: "post",
    //         url: "/user/nickName-check",
    //         data: {
    //             "memberNickName":nickName
    //         },
    //         success:function (res){
    //             console.log("요청성공",res);
    //             if (res === 1){
    //                 console.log("사용가능한 닉네임");
    //                 checkResult2.style.color = "green";
    //                 checkResult2.innerHTML = "사용 가능한 닉네임입니다."
    //             } else {
    //                 console.log("이미 사용중인 닉네임");
    //                 checkResult2.style.color = "red";
    //                 checkResult2.innerHTML = "사용 중인 닉네임입니다."
    //             }
    //         },
    //         error:function (err){
    //             console.log("에러발생",err);
    //         }
    //     })
    // }

    // <!--입력한 비밀번호와 입력한 비밀번호 확인이 일치할 시 회원가입 버튼이 활성화되고 그렇지 않으면 활성화가 안됨-->
    function test(){
        console.log("dddd")
        var v1 = document.getElementById('password1').value; <!--password1의 값을 v1로 지정함-->
        var v2 = document.getElementById('password2').value; <!--password2의 값을 v2로 지정함-->
        console.log(v1, v2)
        if(v1 != v2) { <!--v1와 v2의 값이 다르다면-->
            alert("비밀번호가 일치하지 않습니다");
            const target = document.getElementById('target_btn');
            target.disabled = true; <!--버튼이 비활성화 되있는 상태에서 true라서 그대로 비활성화 되있음-->
            return false;
        } else {
            alert("비밀번호가 일치합니다");
            const target = document.getElementById('target_btn');
            target.disabled = false; <!--버튼이 비활성화 되있는 상태에서 false로 바껴서 활성화가 됨-->
            return true;
        }
    }


    function back(){
        history.back();
    } <!--뒤로 가기-->
</script>

</body>
</html>